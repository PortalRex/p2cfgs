// Your own configurations should go in this file

// These commented lines contain the default settings. You can override
// any of these here by uncommenting and modifying the line. Feel free
// to delete all these lines.

// sar_hud_font_index 68
// sar_hud_x 5
// sar_hud_y 5
// sar_hud_spacing 5
// sar_hud_bg 1
// sar_hud_velocity 3
// sar_hud_position 2
// sar_hud_angles 1
// sar_hud_demo 1

// svar_set fullgame_demo_name "%Y-%m-%d_%H-%M-%S/fullgame"
// svar_set anypc_demo_name    "%Y-%m-%d_%H-%M-%S/anypc"
svar_set sp_cm_demo_name    "demos/sp/chapter$chapter/$map/$map"
// svar_set amc_demo_name      "$role/%Y-%m-%d_%H-%M-%S/amc"
// svar_set ac_demo_name       "$role/%Y-%m-%d_%H-%M-%S/ac"
svar_set coop_cm_demo_name  "demos/coop/course$course/$map/$map"
// svar_set il_demo_name       "chapter$chapter/$map/$map"

echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"
echo "zach is short"

//Exec map name in AMC, AC and ILs
sar_on_load cond "game=portal2 & !var:no_dialogue_toasts=1 & (var:category=amc | var:category=ac | var:category=chapter_il)"  "exec dialogue_toasts/coop_map_names"

sar_hud_hide_text 0
sar_hud_hide_text 1

// Load counter for demos
// __loads is implicitly 0, so no need to set it
sar_function echo_load echo "Load: $__loads"
sar_on_load "svar_add __loads 1; echo_load"

exec ihud
sar_hud_font_index 2
save_screenshot 0

//Sets FPS to 300 as I believe it gives more consistent flings
sar_on_load cond "map=sp_a4_laser_catapult" fps_max 300

//Sets FPS to 300 to prevent faster angle decay on Industrial fan 
cond "!game=mel" sar_on_load cond  "map=mp_coop_fan" fps_max 300
cond "!game=mel" sar_on_load cond "!map=mp_coop_fan & !map=sp_a4_laser_catapult" fps_max 995

//Exports mtrigger stats 
sar_on_exit sar_speedrun_export_all mtriggerstats

//Amc coop ping
sar_alias amc_only cond "var:category=amc"
sar_alias +q "cm_only +quick_ping; non_cm_only save quick; amc_only +coop_ping; nop"
sar_alias -q "cm_only -quick_ping; amc_only -coop_ping; nop"
bind q +q

//practice binds 
sar_alias +p "cm_only 1; non_cm_only script_execute restore_checkpoint; nop"
sar_alias -p "cm_only 1; amc_only script_execute restore_checkpoint; nop"
bind mouse4 +p

sar_alias +c "cm_only +zoom; non_cm_only script_execute set_checkpoint; nop"
sar_alias -c "cm_only -zoom; amc_only script_execute set_checkpoint; nop"
bind mouse5 +c

sar_challenge_autosubmit_reload_api_key 
sar_hud_bg 0
sar_toast_y 800
sar_toast_x 2

sar_on_load sar_speedrun_autoreset_clear
sar_on_load cond "?category=sp_cm | ?category=coop_cm" sar_expand sar_speedrun_autoreset_load autoreset/$map
sar_on_load cond "cm & map=sp_a3_crazy_box" "exec crazybox"
sar_on_load cond "!map=sp_a3_crazy_box" "exec defaultmap"
sar_on_load cond "map=sp_a3_portal_intro & cm" "exec conversionintro"
dialogue_toggle