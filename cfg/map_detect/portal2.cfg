sar_function setmap "svar_set chapter $1; svar_set course $1; svar_set map $2; svar_set formatted_map $'$3$'; svar_set builtin_map 1"

svar_set builtin_map 0
svar_set chapter 0
svar_set course 0
svar_set chapter_name unknown
svar_set course_name unknown
svar_set map unknown
svar_set role unknown

cond "!coop" svar_set role sp
cond "coop & orange"  svar_set role orange
cond "coop & !orange" svar_set role blue

cond "map=sp_a5_credits"    setmap 0 credits          "Credits"
cond "map=credits"          setmap 0 credits          "Credits"
cond "map=mp_coop_credits"  setmap 0 credits          "Credits"
cond "map=credits_museum"   setmap 0 credits-museum   "Credits Museum"
cond "map=celeste_moonroom" setmap 0 celeste-moonroom "Moon Room"

cond "map=sp_a1_intro1"  setmap 1 container-ride  "Container Ride"
cond "map=sp_a1_intro2"  setmap 1 portal-carousel "Portal Carousel"
cond "map=sp_a1_intro3"  setmap 1 portal-gun      "Portal Gun"
cond "map=sp_a1_intro4"  setmap 1 smooth-jazz     "Smooth Jazz"
cond "map=sp_a1_intro5"  setmap 1 cube-momentum   "Cube Momentum"
cond "map=sp_a1_intro6"  setmap 1 future-starter  "Future Starter"
cond "map=sp_a1_intro7"  setmap 1 secret-panel    "Secret Panel"
cond "map=sp_a1_wakeup"  setmap 1 wakeup          "Wakeup"
cond "map=sp_a2_intro"   setmap 1 incinerator     "Incinerator"

cond "map=sp_a2_laser_intro"     setmap 2 laser-intro    "Laser Intro"
cond "map=sp_a2_laser_stairs"    setmap 2 laser-stairs   "Laser Stairs"
cond "map=sp_a2_dual_lasers"     setmap 2 dual-lasers    "Dual Lasers"
cond "map=sp_a2_laser_over_goo"  setmap 2 laser-over-goo "Laser Over Goo"
cond "map=sp_a2_catapult_intro"  setmap 2 catapult-intro "Catapult Intro"
cond "map=sp_a2_trust_fling"     setmap 2 trust-fling    "Trust Fling"
cond "map=sp_a2_pit_flings"      setmap 2 pit-flings     "Pit Flings"
cond "map=sp_a2_fizzler_intro"   setmap 2 fizzler-intro  "Fizzler Intro"

cond "map=sp_a2_sphere_peek"      setmap 3 ceiling-catapult "Ceiling Catapult"
cond "map=sp_a2_ricochet"         setmap 3 ricochet         "Ricochet"
cond "map=sp_a2_bridge_intro"     setmap 3 bridge-intro     "Bridge Intro"
cond "map=sp_a2_bridge_the_gap"   setmap 3 bridge-the-gap   "Bridge The Gap"
cond "map=sp_a2_turret_intro"     setmap 3 turret-intro     "Turret Intro"
cond "map=sp_a2_laser_relays"     setmap 3 laser-relays     "Laser Relays"
cond "map=sp_a2_turret_blocker"   setmap 3 turret-blocker   "Turret Blocker"
cond "map=sp_a2_laser_vs_turret"  setmap 3 laser-vs-turret  "Laser vs Turret"
cond "map=sp_a2_pull_the_rug"     setmap 3 pull-the-rug     "Pull the Rug"

cond "map=sp_a2_column_blocker"  setmap 4 column-blocker "Column Blocker"
cond "map=sp_a2_laser_chaining"  setmap 4 laser-chaining "Laser Chaining"
cond "map=sp_a2_triple_laser"    setmap 4 triple-laser   "Triple Laser"
cond "map=sp_a2_bts1"            setmap 4 jailbreak      "Jailbreak"
cond "map=sp_a2_bts2"            setmap 4 escape         "Escape"

cond "map=sp_a2_bts3"  setmap 5 turret-factory      "Turret Factory"
cond "map=sp_a2_bts4"  setmap 5 turret-sabotage     "Turret Sabotage"
cond "map=sp_a2_bts5"  setmap 5 neurotoxin-sabotage "Neurotoxin Sabotage"
cond "map=sp_a2_bts6"  setmap 5 tube-ride           "Tube Ride"
cond "map=sp_a2_core"  setmap 5 core                "Core"

cond "map=sp_a3_00"            setmap 6 long-fall       "Long Fall"
cond "map=sp_a3_01"            setmap 6 underground     "Underground"
cond "map=sp_a3_03"            setmap 6 cave-johnson    "Cave Johnson"
cond "map=sp_a3_jump_intro"    setmap 6 repulsion-intro "Repulsion Intro"
cond "map=sp_a3_bomb_flings"   setmap 6 bomb-flings     "Bomb Flings"
cond "map=sp_a3_crazy_box"     setmap 6 crazy-box       "Crazy Box"
cond "map=sp_a3_transition01"  setmap 6 potatos         "PotatOS"

cond "map=sp_a3_speed_ramp"    setmap 7 propulsion-intro  "Propulsion Intro"
cond "map=sp_a3_speed_flings"  setmap 7 propulsion-flings "Propulsion Flings"
cond "map=sp_a3_portal_intro"  setmap 7 conversion-intro  "Conversion Intro"
cond "map=sp_a3_end"           setmap 7 three-gels        "Three Gels"

cond "map=sp_a4_intro"           setmap 8 test               "Test"
cond "map=sp_a4_tb_intro"        setmap 8 funnel-intro       "Funnel Intro"
cond "map=sp_a4_tb_trust_drop"   setmap 8 ceiling-button     "Ceiling Button"
cond "map=sp_a4_tb_wall_button"  setmap 8 wall-button        "Wall Button"
cond "map=sp_a4_tb_polarity"     setmap 8 polarity           "Polarity"
cond "map=sp_a4_tb_catch"        setmap 8 funnel-catch       "Funnel Catch"
cond "map=sp_a4_stop_the_box"    setmap 8 stop-the-box       "Stop the Box"
cond "map=sp_a4_laser_catapult"  setmap 8 laser-catapult     "Laser Catapult"
cond "map=sp_a4_laser_platform"  setmap 8 laser-platform     "Laser Platform"
cond "map=sp_a4_speed_tb_catch"  setmap 8 propulsion-catch   "Propulsion Catch"
cond "map=sp_a4_jump_polarity"   setmap 8 repulsion-polarity "Repulsion Polarity"

cond "map=sp_a4_finale1"  setmap 9 finale-1 "Finale 1"
cond "map=sp_a4_finale2"  setmap 9 finale-2 "Finale 2"
cond "map=sp_a4_finale3"  setmap 9 finale-3 "Finale 3"
cond "map=sp_a4_finale4"  setmap 9 finale-4 "Finale 4"

cond "map=mp_coop_start"   setmap 0 calibration "Calibration"
cond "map=mp_coop_lobby_3" setmap 0 lobby "Lobby"

cond "map=mp_coop_doors"          setmap 1 doors             "Doors"
cond "map=mp_coop_race_2"         setmap 1 buttons           "Buttons"
cond "map=mp_coop_laser_2"        setmap 1 lasers            "Lasers"
cond "map=mp_coop_rat_maze"       setmap 1 rat-maze          "Rat Maze"
cond "map=mp_coop_laser_crusher"  setmap 1 laser-crusher     "Laser Crusher"
cond "map=mp_coop_teambts"        setmap 1 behind-the-scenes "Behind the Scenes"

cond "map=mp_coop_fling_3"            setmap 2 flings          "Flings"
cond "map=mp_coop_infinifling_train"  setmap 2 infinifling     "Infinifling"
cond "map=mp_coop_come_along"         setmap 2 team-retrieval  "Team Retrieval"
cond "map=mp_coop_fling_1"            setmap 2 vertical-flings "Vertical Flings"
cond "map=mp_coop_catapult_1"         setmap 2 catapults       "Catapults"
cond "map=mp_coop_multifling_1"       setmap 2 multifling      "Multifling"
cond "map=mp_coop_fling_crushers"     setmap 2 fling-crushers  "Fling Crushers"
cond "map=mp_coop_fan"                setmap 2 industrial-fan  "Industrial Fan"

cond "map=mp_coop_wall_intro"           setmap 3 cooperative-bridges "Cooperative Bridges"
cond "map=mp_coop_wall_2"               setmap 3 bridge-swap         "Bridge Swap"
cond "map=mp_coop_catapult_wall_intro"  setmap 3 fling-block         "Fling Block"
cond "map=mp_coop_wall_block"           setmap 3 catapult-block      "Catapult Block"
cond "map=mp_coop_catapult_2"           setmap 3 bridge-fling        "Bridge Fling"
cond "map=mp_coop_turret_walls"         setmap 3 turret-walls        "Turret Walls"
cond "map=mp_coop_turret_ball"          setmap 3 turret-assassin     "Turret Assassin"
cond "map=mp_coop_wall_5"               setmap 3 bridge-testing      "Bridge Testing"

cond "map=mp_coop_tbeam_redirect"       setmap 4 cooperative-funnels  "Cooperative Funnels"
cond "map=mp_coop_tbeam_drill"          setmap 4 funnel-drill         "Funnel Drill"
cond "map=mp_coop_tbeam_catch_grind_1"  setmap 4 funnel-catch         "Funnel Catch"
cond "map=mp_coop_tbeam_laser_1"        setmap 4 funnel-laser         "Funnel Laser"
cond "map=mp_coop_tbeam_polarity"       setmap 4 cooperative-polarity "Cooperative Polarity"
cond "map=mp_coop_tbeam_polarity2"      setmap 4 funnel-hop           "Funnel Hop"
cond "map=mp_coop_tbeam_polarity3"      setmap 4 advanced-polarity    "Advanced Polarity"
cond "map=mp_coop_tbeam_maze"           setmap 4 funnel-maze          "Funnel Maze"
cond "map=mp_coop_tbeam_end"            setmap 4 turret-warehouse     "Turret Warehouse"

cond "map=mp_coop_paint_come_along"      setmap 5 repulsion-jumps      "Repulsion Jumps"
cond "map=mp_coop_paint_redirect"        setmap 5 double-bounce        "Double Bounce"
cond "map=mp_coop_paint_bridge"          setmap 5 bridge-repulsion     "Bridge Repulsion"
cond "map=mp_coop_paint_walljumps"       setmap 5 wall-repulsion       "Wall Repulsion"
cond "map=mp_coop_paint_speed_fling"     setmap 5 propulsion-crushers  "Propulsion Crushers"
cond "map=mp_coop_paint_red_racer"       setmap 5 turret-ninja         "Turret Ninja"
cond "map=mp_coop_paint_speed_catch"     setmap 5 propulsion-retrieval "Propulsion Retrieval"
cond "map=mp_coop_paint_longjump_intro"  setmap 5 vault-entrance       "Vault Entrance"

cond "map=mp_coop_separation_1"      setmap 6 separation     "Separation"
cond "map=mp_coop_tripleaxis"        setmap 6 triple-axis    "Triple Axis"
cond "map=mp_coop_catapult_catch"    setmap 6 catapult-catch "Catapult Catch"
cond "map=mp_coop_2paints_1bridge"   setmap 6 bridge-gels    "Bridge Gels"
cond "map=mp_coop_paint_conversion"  setmap 6 maintenance    "Maintenance"
cond "map=mp_coop_bridge_catch"      setmap 6 bridge-catch   "Bridge Catch"
cond "map=mp_coop_laser_tbeam"       setmap 6 double-lift    "Double Lift"
cond "map=mp_coop_paint_rat_maze"    setmap 6 gel-maze       "Gel Maze"
cond "map=mp_coop_paint_crazy_box"   setmap 6 crazier-box    "Crazier Box"

cond "!coop & var:chapter=1" svar_set chapter_name the-courtesy-call
cond "!coop & var:chapter=2" svar_set chapter_name the-cold-boot
cond "!coop & var:chapter=3" svar_set chapter_name the-return
cond "!coop & var:chapter=4" svar_set chapter_name the-surprise
cond "!coop & var:chapter=5" svar_set chapter_name the-escape
cond "!coop & var:chapter=6" svar_set chapter_name the-fall
cond "!coop & var:chapter=7" svar_set chapter_name the-reunion
cond "!coop & var:chapter=8" svar_set chapter_name the-itch
cond "!coop & var:chapter=9" svar_set chapter_name the-part-where-he-kills-you

cond "coop & var:chapter=1" svar_set chapter_name team-building
cond "coop & var:chapter=2" svar_set chapter_name mass-and-velocity
cond "coop & var:chapter=3" svar_set chapter_name hard-light-surfaces
cond "coop & var:chapter=4" svar_set chapter_name excursion-funnels
cond "coop & var:chapter=5" svar_set chapter_name mobility-gels
cond "coop & var:chapter=6" svar_set chapter_name art-therapy

sar_expand svar_set course_name $chapter_name

cond "coop"  sar_expand svar_set chapter_course "course$chapter"
cond "!coop" sar_expand svar_set chapter_course "chapter$chapter"
